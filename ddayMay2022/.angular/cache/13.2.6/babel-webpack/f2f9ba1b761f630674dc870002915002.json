{"ast":null,"code":"import _asyncToGenerator from \"/Users/clew/Desktop/newDDayApps/ddayMay2022/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { WebPlugin } from '@capacitor/core';\nimport * as Cookie from './cookie';\nimport * as Request from './request';\nexport class HttpWeb extends WebPlugin {\n  constructor() {\n    var _this;\n\n    super();\n    _this = this;\n\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    this.request = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (options) {\n        return Request.request(options);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n\n\n    this.get = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (options) {\n        return Request.get(options);\n      });\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n\n\n    this.post = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(function* (options) {\n        return Request.post(options);\n      });\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n\n\n    this.put = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator(function* (options) {\n        return Request.put(options);\n      });\n\n      return function (_x4) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n\n\n    this.patch = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator(function* (options) {\n        return Request.patch(options);\n      });\n\n      return function (_x5) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n\n\n    this.del = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator(function* (options) {\n        return Request.del(options);\n      });\n\n      return function (_x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n    /**\n     * Gets all HttpCookies as a Map\n     */\n\n\n    this.getCookiesMap = /*#__PURE__*/function () {\n      var _ref7 = _asyncToGenerator(function* ( // @ts-ignore\n      options) {\n        const cookies = Cookie.getCookies();\n        const output = {};\n\n        for (const cookie of cookies) {\n          output[cookie.key] = cookie.value;\n        }\n\n        return output;\n      });\n\n      return function (_x7) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n    /**\n     * Get all HttpCookies as an object with the values as an HttpCookie[]\n     */\n\n\n    this.getCookies = /*#__PURE__*/function () {\n      var _ref8 = _asyncToGenerator(function* (options) {\n        // @ts-ignore\n        const {\n          url\n        } = options;\n        const cookies = Cookie.getCookies();\n        return {\n          cookies\n        };\n      });\n\n      return function (_x8) {\n        return _ref8.apply(this, arguments);\n      };\n    }();\n    /**\n     * Set a cookie\n     * @param key The key to set\n     * @param value The value to set\n     * @param options Optional additional parameters\n     */\n\n\n    this.setCookie = /*#__PURE__*/function () {\n      var _ref9 = _asyncToGenerator(function* (options) {\n        const {\n          key,\n          value,\n          expires = '',\n          path = ''\n        } = options;\n        Cookie.setCookie(key, value, {\n          expires,\n          path\n        });\n      });\n\n      return function (_x9) {\n        return _ref9.apply(this, arguments);\n      };\n    }();\n    /**\n     * Gets all cookie values unless a key is specified, then return only that value\n     * @param key The key of the cookie value to get\n     */\n\n\n    this.getCookie = /*#__PURE__*/function () {\n      var _ref10 = _asyncToGenerator(function* (options) {\n        return Cookie.getCookie(options.key);\n      });\n\n      return function (_x10) {\n        return _ref10.apply(this, arguments);\n      };\n    }();\n    /**\n     * Deletes a cookie given a key\n     * @param key The key of the cookie to delete\n     */\n\n\n    this.deleteCookie = /*#__PURE__*/function () {\n      var _ref11 = _asyncToGenerator(function* (options) {\n        return Cookie.deleteCookie(options.key);\n      });\n\n      return function (_x11) {\n        return _ref11.apply(this, arguments);\n      };\n    }();\n    /**\n     * Clears out cookies by setting them to expire immediately\n     */\n\n\n    this.clearCookies = /*#__PURE__*/function () {\n      var _ref12 = _asyncToGenerator(function* ( // @ts-ignore\n      options) {\n        return Cookie.clearCookies();\n      });\n\n      return function (_x12) {\n        return _ref12.apply(this, arguments);\n      };\n    }();\n    /**\n     * Clears out cookies by setting them to expire immediately\n     */\n\n\n    this.clearAllCookies = /*#__PURE__*/_asyncToGenerator(function* () {\n      return Cookie.clearCookies();\n    });\n    /**\n     * Uploads a file through a POST request\n     * @param options TODO\n     */\n\n    this.uploadFile = /*#__PURE__*/function () {\n      var _ref14 = _asyncToGenerator(function* (options) {\n        const formData = new FormData();\n        formData.append(options.name, options.blob || 'undefined');\n        const fetchOptions = Object.assign(Object.assign({}, options), {\n          body: formData,\n          method: 'POST'\n        });\n        return _this.post(fetchOptions);\n      });\n\n      return function (_x13) {\n        return _ref14.apply(this, arguments);\n      };\n    }();\n    /**\n     * Downloads a file\n     * @param options TODO\n     */\n\n\n    this.downloadFile = /*#__PURE__*/function () {\n      var _ref15 = _asyncToGenerator(function* (options) {\n        const requestInit = Request.buildRequestInit(options, options.webFetchExtra);\n        const response = yield fetch(options.url, requestInit);\n        let blob;\n        if (!(options === null || options === void 0 ? void 0 : options.progress)) blob = yield response.blob();else if (!(response === null || response === void 0 ? void 0 : response.body)) blob = new Blob();else {\n          const reader = response.body.getReader();\n          let bytes = 0;\n          let chunks = [];\n          const contentType = response.headers.get('content-type');\n          const contentLength = parseInt(response.headers.get('content-length') || '0', 10);\n\n          while (true) {\n            const {\n              done,\n              value\n            } = yield reader.read();\n            if (done) break;\n            chunks.push(value);\n            bytes += (value === null || value === void 0 ? void 0 : value.length) || 0;\n            const status = {\n              type: 'DOWNLOAD',\n              url: options.url,\n              bytes,\n              contentLength\n            };\n\n            _this.notifyListeners('progress', status);\n          }\n\n          let allChunks = new Uint8Array(bytes);\n          let position = 0;\n\n          for (const chunk of chunks) {\n            if (typeof chunk === 'undefined') continue;\n            allChunks.set(chunk, position);\n            position += chunk.length;\n          }\n\n          blob = new Blob([allChunks.buffer], {\n            type: contentType || undefined\n          });\n        }\n        return {\n          blob\n        };\n      });\n\n      return function (_x14) {\n        return _ref15.apply(this, arguments);\n      };\n    }();\n  }\n\n}","map":{"version":3,"sources":["/Users/clew/Desktop/newDDayApps/ddayMay2022/node_modules/@capacitor-community/http/dist/esm/web.js"],"names":["WebPlugin","Cookie","Request","HttpWeb","constructor","request","options","get","post","put","patch","del","getCookiesMap","cookies","getCookies","output","cookie","key","value","url","setCookie","expires","path","getCookie","deleteCookie","clearCookies","clearAllCookies","uploadFile","formData","FormData","append","name","blob","fetchOptions","Object","assign","body","method","downloadFile","requestInit","buildRequestInit","webFetchExtra","response","fetch","progress","Blob","reader","getReader","bytes","chunks","contentType","headers","contentLength","parseInt","done","read","push","length","status","type","notifyListeners","allChunks","Uint8Array","position","chunk","set","buffer","undefined"],"mappings":"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","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nimport * as Cookie from './cookie';\nimport * as Request from './request';\nexport class HttpWeb extends WebPlugin {\n    constructor() {\n        super();\n        /**\n         * Perform an Http request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.request = async (options) => Request.request(options);\n        /**\n         * Perform an Http GET request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.get = async (options) => Request.get(options);\n        /**\n         * Perform an Http POST request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.post = async (options) => Request.post(options);\n        /**\n         * Perform an Http PUT request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.put = async (options) => Request.put(options);\n        /**\n         * Perform an Http PATCH request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.patch = async (options) => Request.patch(options);\n        /**\n         * Perform an Http DELETE request given a set of options\n         * @param options Options to build the HTTP request\n         */\n        this.del = async (options) => Request.del(options);\n        /**\n         * Gets all HttpCookies as a Map\n         */\n        this.getCookiesMap = async (\n        // @ts-ignore\n        options) => {\n            const cookies = Cookie.getCookies();\n            const output = {};\n            for (const cookie of cookies) {\n                output[cookie.key] = cookie.value;\n            }\n            return output;\n        };\n        /**\n         * Get all HttpCookies as an object with the values as an HttpCookie[]\n         */\n        this.getCookies = async (options) => {\n            // @ts-ignore\n            const { url } = options;\n            const cookies = Cookie.getCookies();\n            return { cookies };\n        };\n        /**\n         * Set a cookie\n         * @param key The key to set\n         * @param value The value to set\n         * @param options Optional additional parameters\n         */\n        this.setCookie = async (options) => {\n            const { key, value, expires = '', path = '' } = options;\n            Cookie.setCookie(key, value, { expires, path });\n        };\n        /**\n         * Gets all cookie values unless a key is specified, then return only that value\n         * @param key The key of the cookie value to get\n         */\n        this.getCookie = async (options) => Cookie.getCookie(options.key);\n        /**\n         * Deletes a cookie given a key\n         * @param key The key of the cookie to delete\n         */\n        this.deleteCookie = async (options) => Cookie.deleteCookie(options.key);\n        /**\n         * Clears out cookies by setting them to expire immediately\n         */\n        this.clearCookies = async (\n        // @ts-ignore\n        options) => Cookie.clearCookies();\n        /**\n         * Clears out cookies by setting them to expire immediately\n         */\n        this.clearAllCookies = async () => Cookie.clearCookies();\n        /**\n         * Uploads a file through a POST request\n         * @param options TODO\n         */\n        this.uploadFile = async (options) => {\n            const formData = new FormData();\n            formData.append(options.name, options.blob || 'undefined');\n            const fetchOptions = Object.assign(Object.assign({}, options), { body: formData, method: 'POST' });\n            return this.post(fetchOptions);\n        };\n        /**\n         * Downloads a file\n         * @param options TODO\n         */\n        this.downloadFile = async (options) => {\n            const requestInit = Request.buildRequestInit(options, options.webFetchExtra);\n            const response = await fetch(options.url, requestInit);\n            let blob;\n            if (!(options === null || options === void 0 ? void 0 : options.progress))\n                blob = await response.blob();\n            else if (!(response === null || response === void 0 ? void 0 : response.body))\n                blob = new Blob();\n            else {\n                const reader = response.body.getReader();\n                let bytes = 0;\n                let chunks = [];\n                const contentType = response.headers.get('content-type');\n                const contentLength = parseInt(response.headers.get('content-length') || '0', 10);\n                while (true) {\n                    const { done, value } = await reader.read();\n                    if (done)\n                        break;\n                    chunks.push(value);\n                    bytes += (value === null || value === void 0 ? void 0 : value.length) || 0;\n                    const status = {\n                        type: 'DOWNLOAD',\n                        url: options.url,\n                        bytes,\n                        contentLength,\n                    };\n                    this.notifyListeners('progress', status);\n                }\n                let allChunks = new Uint8Array(bytes);\n                let position = 0;\n                for (const chunk of chunks) {\n                    if (typeof chunk === 'undefined')\n                        continue;\n                    allChunks.set(chunk, position);\n                    position += chunk.length;\n                }\n                blob = new Blob([allChunks.buffer], { type: contentType || undefined });\n            }\n            return {\n                blob,\n            };\n        };\n    }\n}\n"]},"metadata":{},"sourceType":"module"}